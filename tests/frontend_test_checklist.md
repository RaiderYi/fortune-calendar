# 前端功能测试清单

本文档提供详细的手动测试步骤和预期结果，用于验证所有前端功能正常工作。

## 测试环境准备

- [ ] 确保开发服务器运行 (`npm run dev`)
- [ ] 清除浏览器缓存和本地存储
- [ ] 使用Chrome/Edge浏览器（支持通知API）
- [ ] 准备测试账号（邮箱/手机号）

---

## 1. 通知功能测试

### 1.1 通知权限请求

**测试步骤：**
1. 打开应用
2. 进入"我的"页面
3. 点击"通知设置"
4. 尝试启用"每日运势提醒"

**预期结果：**
- [ ] 浏览器弹出通知权限请求对话框
- [ ] 允许后，通知设置显示"已启用"
- [ ] 拒绝后，显示相应提示信息

### 1.2 设置每日提醒时间

**测试步骤：**
1. 在通知设置页面
2. 选择提醒时间（例如：09:00）
3. 保存设置
4. 刷新页面

**预期结果：**
- [ ] 时间选择器正常工作
- [ ] 设置保存成功
- [ ] 刷新后设置仍然保留

### 1.3 接收测试通知

**测试步骤：**
1. 在通知设置页面
2. 点击"发送测试通知"按钮

**预期结果：**
- [ ] 立即收到浏览器通知
- [ ] 通知内容正确显示
- [ ] 点击通知可以打开应用

### 1.4 通知设置持久化

**测试步骤：**
1. 设置通知偏好
2. 关闭浏览器标签页
3. 重新打开应用
4. 检查通知设置

**预期结果：**
- [ ] 通知设置正确恢复
- [ ] 启用状态保持一致

---

## 2. 任务系统测试

### 2.1 查看任务列表

**测试步骤：**
1. 打开应用
2. 点击"任务中心"（在Header或MyPage）
3. 查看任务列表

**预期结果：**
- [ ] 显示每日任务、周任务、成就任务
- [ ] 任务描述清晰
- [ ] 进度条正确显示

### 2.2 完成任务 - 查看运势

**测试步骤：**
1. 打开任务中心
2. 查看"每日查看运势"任务
3. 返回首页查看今日运势
4. 再次打开任务中心

**预期结果：**
- [ ] 任务进度更新（1/1）
- [ ] 任务标记为"已完成"
- [ ] 可以领取奖励

### 2.3 完成任务 - 每日签到

**测试步骤：**
1. 打开任务中心
2. 查看"每日签到"任务
3. 进行签到操作
4. 检查任务进度

**预期结果：**
- [ ] 签到后任务进度更新
- [ ] 任务状态变为"已完成"
- [ ] 显示奖励信息

### 2.4 完成任务 - 记录日记

**测试步骤：**
1. 打开任务中心
2. 查看"记录日记"任务
3. 创建一篇日记
4. 检查任务进度

**预期结果：**
- [ ] 日记创建后任务进度更新
- [ ] 任务可以领取奖励

### 2.5 领取任务奖励

**测试步骤：**
1. 完成一个任务
2. 点击"领取奖励"按钮
3. 查看奖励动画

**预期结果：**
- [ ] 奖励成功领取
- [ ] 显示奖励动画/提示
- [ ] 任务状态更新为"已领取"

### 2.6 任务进度更新

**测试步骤：**
1. 查看周任务"连续7天查看运势"
2. 连续多天查看运势
3. 每天检查任务进度

**预期结果：**
- [ ] 进度每天递增
- [ ] 进度条正确更新
- [ ] 完成后可以领取奖励

---

## 3. 报告功能测试

### 3.1 生成周报

**测试步骤：**
1. 进入"我的"页面
2. 点击"运势报告"
3. 选择"周报"
4. 选择日期范围（最近7天）
5. 生成报告

**预期结果：**
- [ ] 报告成功生成
- [ ] 显示平均分、最高分、最低分
- [ ] 显示趋势图表
- [ ] 显示各维度统计

### 3.2 生成月报

**测试步骤：**
1. 进入"我的"页面
2. 点击"运势报告"
3. 选择"月报"
4. 选择日期范围（最近30天）
5. 生成报告

**预期结果：**
- [ ] 报告成功生成
- [ ] 显示月度统计数据
- [ ] 图表正确显示趋势
- [ ] 维度分析完整

### 3.3 报告数据准确性

**测试步骤：**
1. 查看历史记录（确保有足够数据）
2. 生成周报
3. 手动计算平均值
4. 对比报告中的数值

**预期结果：**
- [ ] 平均分计算正确
- [ ] 最高/最低分正确
- [ ] 日期范围正确

### 3.4 报告图表显示

**测试步骤：**
1. 生成包含多个数据点的报告
2. 查看趋势图表
3. 检查图表交互（如果有）

**预期结果：**
- [ ] 图表正确渲染
- [ ] 数据点正确显示
- [ ] 图表样式美观
- [ ] 响应式布局正常

---

## 4. 日记功能测试

### 4.1 创建日记条目

**测试步骤：**
1. 在"今日"页面或"我的"页面
2. 点击"写日记"按钮
3. 输入日记内容
4. 选择心情/标签（如果有）
5. 保存日记

**预期结果：**
- [ ] 日记成功保存
- [ ] 显示保存成功提示
- [ ] 日记与当前日期关联
- [ ] 自动关联当日运势分数

### 4.2 编辑日记条目

**测试步骤：**
1. 打开已有日记
2. 修改内容
3. 保存修改

**预期结果：**
- [ ] 日记内容正确更新
- [ ] 保存时间更新
- [ ] 显示修改成功提示

### 4.3 查看历史日记

**测试步骤：**
1. 进入"我的"页面
2. 点击"运势日记"
3. 查看日记列表
4. 点击某篇日记查看详情

**预期结果：**
- [ ] 日记列表正确显示
- [ ] 按日期排序（最新的在前）
- [ ] 可以查看完整内容
- [ ] 显示关联的运势分数

### 4.4 日记与运势关联

**测试步骤：**
1. 查看某日的运势
2. 记录该日的日记
3. 在日记中查看运势分数
4. 验证分数一致性

**预期结果：**
- [ ] 日记显示当日运势分数
- [ ] 分数与运势页面一致
- [ ] 可以点击查看详细运势

### 4.5 日记搜索/筛选（如果有）

**测试步骤：**
1. 在日记列表页面
2. 使用搜索功能（如果有）
3. 使用筛选功能（如果有）

**预期结果：**
- [ ] 搜索功能正常工作
- [ ] 筛选功能正常工作
- [ ] 结果正确显示

---

## 5. 开发者仪表板测试

**注意：** 此功能需要admin权限

### 5.1 访问开发者仪表板

**测试步骤：**
1. 使用admin账号登录
2. 进入"我的"页面
3. 点击"开发者仪表板"

**预期结果：**
- [ ] 只有admin用户可以看到此选项
- [ ] 仪表板正常打开
- [ ] 显示统计数据

### 5.2 查看统计数据

**测试步骤：**
1. 打开开发者仪表板
2. 查看各项统计指标

**预期结果：**
- [ ] 日活用户数正确显示
- [ ] 新用户数正确显示
- [ ] 登录次数统计正确
- [ ] 平均会话时长显示
- [ ] 功能使用统计完整

### 5.3 数据可视化

**测试步骤：**
1. 查看仪表板中的图表
2. 检查图表数据

**预期结果：**
- [ ] 图表正确渲染
- [ ] 数据准确
- [ ] 图表样式美观

### 5.4 数据导出（如果有）

**测试步骤：**
1. 在开发者仪表板
2. 点击"导出数据"按钮（如果有）

**预期结果：**
- [ ] 数据成功导出
- [ ] 导出格式正确（CSV/JSON）
- [ ] 数据完整

---

## 6. 集成测试

### 6.1 用户注册登录流程

**测试步骤：**
1. 打开应用
2. 注册新账号
3. 登录
4. 查看个人信息

**预期结果：**
- [ ] 注册成功
- [ ] 登录成功
- [ ] Token正确保存
- [ ] 个人信息正确显示

### 6.2 数据同步流程

**测试步骤：**
1. 在设备A上使用应用，产生一些数据
2. 登录账号
3. 同步数据
4. 在设备B上登录同一账号
5. 下载数据

**预期结果：**
- [ ] 数据成功上传
- [ ] 数据成功下载
- [ ] 数据完整无丢失
- [ ] 冲突正确解决

### 6.3 完整用户流程

**测试步骤：**
1. 注册/登录
2. 设置个人信息（八字）
3. 查看今日运势
4. 完成任务
5. 记录日记
6. 生成报告
7. 查看历史

**预期结果：**
- [ ] 所有步骤顺利完成
- [ ] 数据正确保存
- [ ] 功能之间正确关联

---

## 7. 边界情况测试

### 7.1 无网络情况

**测试步骤：**
1. 断开网络连接
2. 尝试使用需要网络的功能

**预期结果：**
- [ ] 显示网络错误提示
- [ ] 本地功能仍可使用
- [ ] 数据在恢复网络后同步

### 7.2 大量数据

**测试步骤：**
1. 生成大量历史记录（100+条）
2. 查看报告
3. 查看历史列表

**预期结果：**
- [ ] 应用不卡顿
- [ ] 数据正确显示
- [ ] 性能可接受

### 7.3 日期边界

**测试步骤：**
1. 查看未来日期（如1年后）
2. 查看过去日期（如1年前）
3. 查看边界日期

**预期结果：**
- [ ] 日期选择器正常工作
- [ ] 运势计算正确
- [ ] 无错误提示

---

## 8. 打赏收款码测试

### 8.1 首页打赏区块

**测试步骤：**
1. 打开首页 (`/`)
2. 滚动至「用户评价」与「立即探索您的运势」之间
3. 查找「请创作者喝杯咖啡」区块

**预期结果：**
- [ ] 标题显示「请创作者喝杯咖啡」（中文）或 "Buy the creator a coffee"（英文）
- [ ] 副标题显示「感谢您的支持」或 "Thank you for your support."
- [ ] 收款码图片正常显示（需确保 `public/donate-qr.png` 已存在）
- [ ] 图片尺寸约 160×160px，居中显示
- [ ] 暗色模式下背景与边框适配正常

### 8.2 Footer 打赏区块

**测试步骤：**
1. 打开任意页面（首页、关于、帮助、功能、定价等）
2. 滚动至页面底部
3. 在版权信息上方查找打赏区块

**预期结果：**
- [ ] 打赏区块位于 Footer 链接与版权信息之间
- [ ] 标题、副标题、收款码与首页打赏区块一致
- [ ] 全站所有使用 SiteFooter 的页面均可看到

### 8.3 语言切换

**测试步骤：**
1. 将语言切换为英文
2. 检查打赏区块文案
3. 切换回中文再检查

**预期结果：**
- [ ] 英文：标题 "Buy the creator a coffee"，副标题 "Thank you for your support."
- [ ] 中文：标题「请创作者喝杯咖啡」，副标题「感谢您的支持。」
- [ ] 图片 alt 随语言切换（"Donation QR code" / "打赏收款码"）

### 8.4 图片加载

**测试步骤：**
1. 确保 `public/donate-qr.png` 存在
2. 刷新页面，观察图片加载
3. 打开开发者工具 Network 面板，确认 `/donate-qr.png` 返回 200

**预期结果：**
- [ ] 图片加载成功，无 404
- [ ] 使用 `loading="lazy"`，图片在进入视口时加载
- [ ] 若图片缺失，需将收款码复制到 `public/donate-qr.png`

---

## 测试记录

### 测试日期：___________

### 测试人员：___________

### 测试结果：

| 功能模块 | 测试项 | 状态 | 备注 |
|---------|--------|------|------|
| 通知功能 | 权限请求 | ⬜ 通过 ⬜ 失败 | |
| 通知功能 | 设置时间 | ⬜ 通过 ⬜ 失败 | |
| 通知功能 | 测试通知 | ⬜ 通过 ⬜ 失败 | |
| 任务系统 | 查看列表 | ⬜ 通过 ⬜ 失败 | |
| 任务系统 | 完成任务 | ⬜ 通过 ⬜ 失败 | |
| 任务系统 | 领取奖励 | ⬜ 通过 ⬜ 失败 | |
| 报告功能 | 生成周报 | ⬜ 通过 ⬜ 失败 | |
| 报告功能 | 生成月报 | ⬜ 通过 ⬜ 失败 | |
| 日记功能 | 创建日记 | ⬜ 通过 ⬜ 失败 | |
| 日记功能 | 查看历史 | ⬜ 通过 ⬜ 失败 | |
| 开发者仪表板 | 查看统计 | ⬜ 通过 ⬜ 失败 | |
| 打赏收款码 | 首页区块 | ⬜ 通过 ⬜ 失败 | |
| 打赏收款码 | Footer 区块 | ⬜ 通过 ⬜ 失败 | |
| 打赏收款码 | 语言切换 | ⬜ 通过 ⬜ 失败 | |

### 发现的问题：

1. 
2. 
3. 

### 建议改进：

1. 
2. 
3. 

---

## 注意事项

1. **测试环境一致性**：确保在不同浏览器和设备上测试
2. **数据清理**：每次测试前清理本地存储，避免数据干扰
3. **截图记录**：对重要功能和问题点进行截图
4. **性能观察**：注意应用响应速度和流畅度
5. **错误处理**：测试各种错误情况，验证错误提示是否友好
